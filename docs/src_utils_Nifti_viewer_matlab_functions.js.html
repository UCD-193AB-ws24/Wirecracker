<!DOCTYPE html><html lang="en" style="font-size:16px"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Source: src/utils/Nifti_viewer/matlab_functions.js</title><!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]--><script src="scripts/third-party/hljs.js" defer="defer"></script><script src="scripts/third-party/hljs-line-num.js" defer="defer"></script><script src="scripts/third-party/popper.js" defer="defer"></script><script src="scripts/third-party/tippy.js" defer="defer"></script><script src="scripts/third-party/tocbot.min.js"></script><script>var baseURL="/",locationPathname="";baseURL=(locationPathname=document.location.pathname).substr(0,locationPathname.lastIndexOf("/")+1)</script><link rel="stylesheet" href="styles/clean-jsdoc-theme.min.css"><svg aria-hidden="true" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" style="display:none"><defs><symbol id="copy-icon" viewbox="0 0 488.3 488.3"><g><path d="M314.25,85.4h-227c-21.3,0-38.6,17.3-38.6,38.6v325.7c0,21.3,17.3,38.6,38.6,38.6h227c21.3,0,38.6-17.3,38.6-38.6V124    C352.75,102.7,335.45,85.4,314.25,85.4z M325.75,449.6c0,6.4-5.2,11.6-11.6,11.6h-227c-6.4,0-11.6-5.2-11.6-11.6V124    c0-6.4,5.2-11.6,11.6-11.6h227c6.4,0,11.6,5.2,11.6,11.6V449.6z"/><path d="M401.05,0h-227c-21.3,0-38.6,17.3-38.6,38.6c0,7.5,6,13.5,13.5,13.5s13.5-6,13.5-13.5c0-6.4,5.2-11.6,11.6-11.6h227    c6.4,0,11.6,5.2,11.6,11.6v325.7c0,6.4-5.2,11.6-11.6,11.6c-7.5,0-13.5,6-13.5,13.5s6,13.5,13.5,13.5c21.3,0,38.6-17.3,38.6-38.6    V38.6C439.65,17.3,422.35,0,401.05,0z"/></g></symbol><symbol id="search-icon" viewBox="0 0 512 512"><g><g><path d="M225.474,0C101.151,0,0,101.151,0,225.474c0,124.33,101.151,225.474,225.474,225.474    c124.33,0,225.474-101.144,225.474-225.474C450.948,101.151,349.804,0,225.474,0z M225.474,409.323    c-101.373,0-183.848-82.475-183.848-183.848S124.101,41.626,225.474,41.626s183.848,82.475,183.848,183.848    S326.847,409.323,225.474,409.323z"/></g></g><g><g><path d="M505.902,476.472L386.574,357.144c-8.131-8.131-21.299-8.131-29.43,0c-8.131,8.124-8.131,21.306,0,29.43l119.328,119.328    c4.065,4.065,9.387,6.098,14.715,6.098c5.321,0,10.649-2.033,14.715-6.098C514.033,497.778,514.033,484.596,505.902,476.472z"/></g></g></symbol><symbol id="font-size-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11.246 15H4.754l-2 5H.6L7 4h2l6.4 16h-2.154l-2-5zm-.8-2L8 6.885 5.554 13h4.892zM21 12.535V12h2v8h-2v-.535a4 4 0 1 1 0-6.93zM19 18a2 2 0 1 0 0-4 2 2 0 0 0 0 4z"/></symbol><symbol id="add-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M11 11V5h2v6h6v2h-6v6h-2v-6H5v-2z"/></symbol><symbol id="minus-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M5 11h14v2H5z"/></symbol><symbol id="dark-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M10 7a7 7 0 0 0 12 4.9v.1c0 5.523-4.477 10-10 10S2 17.523 2 12 6.477 2 12 2h.1A6.979 6.979 0 0 0 10 7zm-6 5a8 8 0 0 0 15.062 3.762A9 9 0 0 1 8.238 4.938 7.999 7.999 0 0 0 4 12z"/></symbol><symbol id="light-theme-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 18a6 6 0 1 1 0-12 6 6 0 0 1 0 12zm0-2a4 4 0 1 0 0-8 4 4 0 0 0 0 8zM11 1h2v3h-2V1zm0 19h2v3h-2v-3zM3.515 4.929l1.414-1.414L7.05 5.636 5.636 7.05 3.515 4.93zM16.95 18.364l1.414-1.414 2.121 2.121-1.414 1.414-2.121-2.121zm2.121-14.85l1.414 1.415-2.121 2.121-1.414-1.414 2.121-2.121zM5.636 16.95l1.414 1.414-2.121 2.121-1.414-1.414 2.121-2.121zM23 11v2h-3v-2h3zM4 11v2H1v-2h3z"/></symbol><symbol id="reset-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M18.537 19.567A9.961 9.961 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2s10 4.477 10 10c0 2.136-.67 4.116-1.81 5.74L17 12h3a8 8 0 1 0-2.46 5.772l.997 1.795z"/></symbol><symbol id="down-icon" viewBox="0 0 16 16"><path fill-rule="evenodd" clip-rule="evenodd" d="M12.7803 6.21967C13.0732 6.51256 13.0732 6.98744 12.7803 7.28033L8.53033 11.5303C8.23744 11.8232 7.76256 11.8232 7.46967 11.5303L3.21967 7.28033C2.92678 6.98744 2.92678 6.51256 3.21967 6.21967C3.51256 5.92678 3.98744 5.92678 4.28033 6.21967L8 9.93934L11.7197 6.21967C12.0126 5.92678 12.4874 5.92678 12.7803 6.21967Z"></path></symbol><symbol id="codepen-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M16.5 13.202L13 15.535v3.596L19.197 15 16.5 13.202zM14.697 12L12 10.202 9.303 12 12 13.798 14.697 12zM20 10.869L18.303 12 20 13.131V10.87zM19.197 9L13 4.869v3.596l3.5 2.333L19.197 9zM7.5 10.798L11 8.465V4.869L4.803 9 7.5 10.798zM4.803 15L11 19.131v-3.596l-3.5-2.333L4.803 15zM4 13.131L5.697 12 4 10.869v2.262zM2 9a1 1 0 0 1 .445-.832l9-6a1 1 0 0 1 1.11 0l9 6A1 1 0 0 1 22 9v6a1 1 0 0 1-.445.832l-9 6a1 1 0 0 1-1.11 0l-9-6A1 1 0 0 1 2 15V9z"/></symbol><symbol id="close-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M12 10.586l4.95-4.95 1.414 1.414-4.95 4.95 4.95 4.95-1.414 1.414-4.95-4.95-4.95 4.95-1.414-1.414 4.95-4.95-4.95-4.95L7.05 5.636z"/></symbol><symbol id="menu-icon" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0z"/><path d="M3 4h18v2H3V4zm0 7h18v2H3v-2zm0 7h18v2H3v-2z"/></symbol></defs></svg></head><body data-theme="fallback-light"><div class="sidebar-container"><div class="sidebar" id="sidebar"><div class="sidebar-items-container"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-Designation.html">Designation</a></div><div class="sidebar-section-children"><a href="module-Resection.html">Resection</a></div><div class="sidebar-section-children"><a href="module-nifti_viewer.html">nifti_viewer</a></div><div class="sidebar-section-children"><a href="module-nifti_viewer_matlab_functions.html">nifti_viewer/matlab_functions</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-nifti_viewer-FILE.html">FILE</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#Dropdown">Dropdown</a></div><div class="sidebar-section-children"><a href="global.html#Identifiers">Identifiers</a></div><div class="sidebar-section-children"><a href="global.html#Legend">Legend</a></div><div class="sidebar-section-children"><a href="global.html#LegendItem">LegendItem</a></div><div class="sidebar-section-children"><a href="global.html#UserDocumentation">UserDocumentation</a></div><div class="sidebar-section-children"><a href="global.html#generateAcronym">generateAcronym</a></div><div class="sidebar-section-children"><a href="global.html#handleFileRecord">handleFileRecord</a></div><div class="sidebar-section-children"><a href="global.html#insertRegionsAndGetIds">insertRegionsAndGetIds</a></div><div class="sidebar-section-children"><a href="global.html#mapConsecutive">mapConsecutive</a></div><div class="sidebar-section-children"><a href="global.html#parseCSVFile">parseCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#parseDesignation">parseDesignation</a></div><div class="sidebar-section-children"><a href="global.html#parseLocalization">parseLocalization</a></div><div class="sidebar-section-children"><a href="global.html#parseStimulation">parseStimulation</a></div><div class="sidebar-section-children"><a href="global.html#parseTests">parseTests</a></div><div class="sidebar-section-children"><a href="global.html#saveCSVFile">saveCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveDesignationCSVFile">saveDesignationCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveLocalizationToDatabase">saveLocalizationToDatabase</a></div><div class="sidebar-section-children"><a href="global.html#saveStimulationCSVFile">saveStimulationCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveTestCSVFile">saveTestCSVFile</a></div></div></div></div></div><div class="navbar-container" id="VuAckcnZhf"><nav class="navbar"><div class="navbar-left-items"></div><div class="navbar-right-items"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div><nav></nav></nav></div><div class="toc-container"><div class="toc-content"><span class="bold">On this page</span><div id="eed4d2a0bfd64539bb9df78095dec881"></div></div></div><div class="body-wrapper"><div class="main-content"><div class="main-wrapper"><section id="source-page" class="source-page"><header><h1 id="title" class="has-anchor">src_utils_Nifti_viewer_matlab_functions.js</h1></header><article><pre class="prettyprint source lang-js"><code>/*
 *  _    _ _                              _
 * | |  | (_)                            | |
 * | |  | |_ _ __ ___  ___ _ __ __ _  ___| | _____ _ __
 * | |/\| | | '__/ _ \/ __| '__/ _` |/ __| |/ / _ \ '__|
 * \  /\  / | | |  __/ (__| | | (_| | (__|   &lt;  __/ |
 *  \/  \/|_|_|  \___|\___|_|  \__,_|\___|_|\_\___|_|
 *
 *
 * Collection of matlab function ported into javascript.
 * The functions here does not have original algorithm.
 *
 * This file contains:
 *
 * isnumeric
 * unique
 * sub2ind
 * reshape
 * isequal
 * permute
 * transpose
 * flip
 * prod
 * size
 * ndims
 * find
 * det
 * diag
 * bitset
 * inv
 *
 * Developed by Wirecracker team and distributed under MIT license.
 */
/**
 * @module nifti_viewer/matlab_functions
 */
/**
 * Determine whether input is numeric array
 *
 * @param {(any|any[])} value  -  Input array or value
 *
 * @returns {boolean}  true if A is an array of numeric data type. Otherwise, it returns false.
 */
export function isnumeric ( value )
{
    if ( typeof value === 'number' )
    {
        return true;
    }
    else if ( Array.isArray(value) )
    {
        for (const element of value)
        {
            if ( !isnumeric(element) )
            {
                return false;
            }
        }
        return true;
    }
    return false;
}

/**
 * Given an array, return an array that does not contain any duplicates
 * Only tested with single dimensional array
 *
 * @param {any[]} array  -  Input array
 *
 * @returns {any[]}  Array with the same data as in A, but with no repetitions.
 */
export function unique(array)
{
    return [...new Set(array)];
}

/**
 * Convert subscripts to linear indices
 *
 * @param {number[]} sizes  -  Size of array, specified as a vector of positive integers.
 * Each element of this vector indicates the size of the corresponding dimension.
 *
 * @param {...number} subs -  Multidimensional subscripts, specified in scalars.
 *
 * @returns {number}  Linear index, returned as a scalar
 * @throws {Error} If number of subscripts does not match number of dimensions or subscript is out of bounds.
 */
export function sub2ind(sizes, ...subs)
{
    let index = 0;
    let multiplier = 1;

    if (subs.length !== sizes.length)
    {
        throw new Error("Number of subscripts must match number of dimensions");
    }

    for (let i = 0; i &lt; subs.length; i++)
    {
        if (subs[i] &lt; 0 || subs[i] >= sizes[i])
        {
            throw new Error(`Subscript ${subs[i]} is out of bounds for dimension ${i}`);
        }
        index += subs[i] * multiplier;
        multiplier *= sizes[i];
    }
    return index;
}


/**
 * Reshape array by rearranging existing elements
 *
 * @param {any[]} array  -  Input array, specified as a vector, matrix, or multidimensional array.
 * @param {number[]} sizes  -  Output size, specified as a row vector of integers. Each element of
 * sizes indicates the size of the corresponding dimension in output. You must specify the size so
 * that the number of elements in input array and output array are the same. That is, prod(sizes) must
 * be the same as number_of_elements(input).
 *
 * @returns {Object[]}  Reshaped array, returned as a vector, matrix, multidimensional array. The data
 * type and number of elements in output are the same as the data type and number of elements in input.
 *
 * @throws {Error} If number of elements changes after changing the transition.
 */
export function reshape (array, sizes)
{
    let matlabDim = sizes.reverse();
    let tmp = structuredClone(array).flat(Infinity);
    if ( prod(sizes) !== prod(size(tmp)) )
        throw new Error(`Number of elements must not change. (${prod(size(tmp))} => ${prod(sizes)})`);

    let tmpArray2;
    // for each dimensions starting by the last one and ignoring the first one
    for (let sizeIndex = matlabDim.length - 1; sizeIndex > 0; sizeIndex--)
    {
        const size = matlabDim[sizeIndex];
        tmpArray2 = [];

        // aggregate the elements of the current tmpArray in elements of the requested size
        const length = tmp.length / size;
        for (let i = 0; i &lt; length; i++)
        {
            tmpArray2.push(tmp.slice(i * size, (i + 1) * size));
        }
        // set it as the new tmpArray for the next loop turn or for return
        tmp = tmpArray2;
    }

    return tmp;
}

/**
 * Determine array equality
 *
 * @param {any[]} array1  -  Input to be compared
 * @param {any[]} array2  -  Input to be compared
 *
 * @returns {boolean}  true if array1 and array2 are equivalent; otherwise, it returns false.
 */
export function isequal ( array1, array2 )
{
    if (!array1 || !array2)
        return false;

    if ( array1 === array2 )
        return true;

    if ( array1.length != array2.length )
        return false;

    for (var i = 0, l=array1.length; i &lt; l; i++) {
        if (array1[i] instanceof Array &amp;&amp; array2[i] instanceof Array) {
            if (!isequal(array1[i], array2[i]))
                return false;
        }
        else if (array1[i] != array2[i]) {
            return false;
        }
    }
    return true;
}

/**
 * Permute array dimentions
 *
 * @param {any[]} array  -  Input array, specified as a vector, matrix, or multidimensional array.
 * @param {number[]} order  -  Dimension order, specified as a row vector with unique,
 * positive integer elements that represent the dimensions of the input array.
 *
 * @returns {any[]}  Input array with the dimensions rearranged in the order specified by the vector
 * dimorder. For example, permute(A,[1,0]) switches the row and column dimensions of a matrix A. In general,
 * the ith dimension of the output array is the dimension dimorder(i) from the input array.
 */
export function permute(array, order) {
    if (unique(order).length != order.length)
        throw new Error("ORDER cannot contain repeated permutation indices.");

    let check = structuredClone(order).sort();
    if (!isequal(check, Array.from(Array(check.length).keys())))
        throw new Error("ORDER contains an invalid permutation index.");

    let tmp = structuredClone(array);
    for (var i = 0; i &lt; order.length; i++) {

        // Last i elements are already in place
        for (var j = 0; j &lt; (order.length - i - 1); j++) {
            // Checking if the item at present iteration
            // is greater than the next iteration
            if (order[j] > order[j + 1]) {

                // If the condition is true
                // then swap them

                // transpose dimension j
                tmp = transpose_nth_dim(tmp, j);

                [order[j], order[j + 1]] = [order[j + 1], order[j]];
            }
        }
    }

    return tmp;
}

/*
 * Transpose multi-dimensional matrix on nth dimension
 *
 * @param {any[]} arr  -  Input array, specified as a vector or matrix.
 * @param {number} n  -  Dimension to transpose
 *
 * @returns {any[]}  the nonconjugate transpose of input array, that is,
 * interchanges the row and column index for each element.
 */
function transpose_nth_dim ( arr, n ) {
    if ( n == 0 )
    {
        arr = transpose(arr);
    }
    else if ( n == 1 )
    {
        for ( let i = 0; i &lt; arr.length; i++ )
        {
            arr[i] = transpose(arr[i]);
        }
    }
    else
    {
        for ( let i = 0; i &lt; arr.length; i++ )
        {
            arr[i] = transpose_nth_dim(arr[i], n - 1);
        }
    }
    return arr;
}

/**
 * Transpose vector or matrix
 *
 * @param {any[][]} arr  -  Input array, specified as a vector or matrix.
 *
 * @returns {any[][]}  the nonconjugate transpose of input array, that is,
 * interchanges the row and column index for each element.
 */
export function transpose(arr) {
    let rows = arr.length;
    if (!Array.isArray(arr[0])) return arr;
    let cols = arr[0].length;

    // Initialize transposed array
    let transposed = Array.from({ length: cols }, () => Array(rows).fill(0));

    // Swap rows and columns
    for (let i = 0; i &lt; rows; i++) {
        for (let j = 0; j &lt; cols; j++) {
            transposed[j][i] = arr[i][j];
        }
    }

    return transposed;
}

/**
 * Flip order of elements
 * CAUTION: This function modifies the original array.
 *
 * @param {any[]} array  -  Input array, specified as a vector, matrix, or multidimensional array.
 * @param {number} n  -  Dimension to operate along, specified as a positive integer scalar.
 *
 * @returns {any[]}  array with the same size as input, but with the order of the elements at n-th dimension reversed.
 */
export function flip( array, n )
{
    if (!Array.isArray(array))
        return;

    if ( n &lt;= 0 )
    {
        array.reverse();
    }
    else
    {
        for (let item of array)
        {
            flip(item, n - 1);
        }
    }
}

/**
 * Product of array elements
 *
 * @param {number[]} array  -  Input array, specified as a one dimensional array.
 *
 * @returns {number}  product of the array elements of input.
 */
export function prod(array) {
    return array.reduce((acc, num) => acc * num, 1);
}

/**
 * Array size
 *
 * @param {any[]} array  -  Input array, specified as a scalar, a vector, a matrix, or a multidimensional array.
 *
 * @returns {number[]}  a row vector whose elements are the lengths of the corresponding dimensions of input.
 */
export function size(array) {
    let dimension = [];
    while (Array.isArray(array)) {
        dimension.push(array.length);
        array = array[0];
    }
    return dimension;
}

/**
 * Number of array dimensions
 *
 * @param {any[]} array  -  Input array, specified as a scalar, a vector, a matrix, or a multidimensional array.
 *
 * @returns {number[]}  the number of dimensions in the input array. The number of dimensions is always greater than or equal to 2.
 */
export function ndims(array) {
    let ndim = size(array).length;

    if (ndim &lt;= 2)
        return 2;

    return ndim;
}

/**
 * Find indices and values of nonzero elements
 *
 * @param {any[]} array  -  Input array, specified as a scalar, vector, matrix, or multidimensional array.
 *
 * @returns {number[]}  a vector containing the linear indices of each nonzero element in array X.
 */
export function find(X) {
    let indices = [];
    let dimension = size(X);

    function traverse(array, path = [], linearIdx = 0) {
        if (!Array.isArray(array)) {
            if (array !== 0) indices.push(linearIdx); // Store linear index if nonzero
            return linearIdx + 1; // Increment linear index
        }
        return array.reduce((linIdx, val, i) => traverse(val, [...path, i], linIdx), linearIdx);
    }

    traverse(X);

    // Preserve row/column orientation for vectors
    if (dimension.length === 1) return dimension[0] === indices.length ? indices : indices.flat();
    return indices; // Return as column vector for multi-dimensional arrays
}

/**
 * Matrix determinant
 *
 * @param {number[][]} array  -  Input matrix, specified as a square numeric matrix.
 *
 * @returns {number}  the determinant of square matrix.
 */
export function det(matrix) {
    let n = matrix.length;

    // Base case: 1x1 matrix
    if (n === 1) return matrix[0][0];

    // Base case: 2x2 matrix
    if (n === 2) {
        return matrix[0][0] * matrix[1][1] - matrix[0][1] * matrix[1][0];
    }

    let determinant = 0;

    // Expanding along the first row
    for (let j = 0; j &lt; n; j++) {
        let subMatrix = matrix.slice(1).map(row => row.filter((_, col) => col !== j));
        determinant += ((j % 2 === 0 ? 1 : -1) * matrix[0][j] * det(subMatrix));
    }

    return determinant;
}

/**
 * Create diagonal matrix or get diagonal elements of matrix
 *
 * @param {number[][]} values  -  Diagonal elements, specified as a vector.
 *
 * @returns {number[][]}  a square diagonal matrix with the elements of vector v on the main diagonal.
 */
export function diag(values) {
    // Create a square matrix of size values.length x values.length filled with zeros
    let matrix = Array(values.length).fill().map(() => Array(values.length).fill(0));

    // Place the values in the diagonal of the matrix
    for (let i = 0; i &lt; values.length; i++) {
        matrix[i][i] = values[i];  // Set diagonal elements
    }

    return matrix;
}

/**
 * Set bit at specific location
 *
 * @param {number[]} value  -  Input value, specified as an scalar.
 * @param {number} position  -  Bit position, specified as an integer.
 * @param {(0|1)} bit  -  Bit value, specified as a integer.
 *
 * @returns {number[][]}  'value' with 'position' bit set to the value of 'bit'.
 */
export function bitset(value, position, bit) {
    if (bit === 1) {
        return value | (1 &lt;&lt; position); // Set the bit to 1
    } else {
        return value &amp; ~(1 &lt;&lt; position); // Set the bit to 0
    }
}

/**
 * Matrix inverse
 * @see {@link http://web.archive.org/web/20210406035905/http://blog.acipo.com/matrix-inversion-in-javascript/}
 *
 * @param {number[][]} matrix  -  Input matrix, specified as a square matrix.
 *
 * @returns {number[][]}  inverse of input matrix.
 */
export function inv (matrix) {
    if (matrix.length !== matrix[0].length) { return; }
    var i = 0, ii = 0, j = 0, dim = matrix.length, e = 0;
    var I = [], C = [];
    for (i = 0; i &lt; dim; i += 1) {
        I[I.length] = [];
        C[C.length] = [];
        for (j = 0; j &lt; dim; j += 1) {
            if (i == j) { I[i][j] = 1; }
            else { I[i][j] = 0; }
            C[i][j] = matrix[i][j];
        }
    }
    for (i = 0; i &lt; dim; i += 1) {
        e = C[i][i];
        if (e == 0) {
            for (ii = i + 1; ii &lt; dim; ii += 1) {
                if (C[ii][i] != 0) {
                    for (j = 0; j &lt; dim; j++) {
                        e = C[i][j];
                        C[i][j] = C[ii][j];
                        C[ii][j] = e;
                        e = I[i][j];
                        I[i][j] = I[ii][j];
                        I[ii][j] = e;
                    }
                    break;
                }
            }
            e = C[i][i];
            if (e == 0) { return }
        }
        for (j = 0; j &lt; dim; j++) {
            C[i][j] = C[i][j] / e; //apply to original matrix
            I[i][j] = I[i][j] / e; //apply to identity
        }
        for (ii = 0; ii &lt; dim; ii++) {
            if (ii == i) { continue; }
            e = C[ii][i];
            for (j = 0; j &lt; dim; j++) {
                C[ii][j] -= e * C[i][j]; //apply to original matrix
                I[ii][j] -= e * I[i][j]; //apply to identity
            }
        }
    }
    return I;
}
</code></pre></article></section></div></div></div><div class="search-container" id="PkfLWpAbet" style="display:none"><div class="wrapper" id="iCxFxjkHbP"><button class="icon-button search-close-button" id="VjLlGakifb" aria-label="close search"><svg><use xlink:href="#close-icon"></use></svg></button><div class="search-box-c"><svg><use xlink:href="#search-icon"></use></svg> <input type="text" id="vpcKVYIppa" class="search-input" placeholder="Search..." autofocus></div><div class="search-result-c" id="fWwVHRuDuN"><span class="search-result-c-text">Type anything to view search result</span></div></div></div><div class="mobile-menu-icon-container"><button class="icon-button" id="mobile-menu" data-isopen="false" aria-label="menu"><svg><use xlink:href="#menu-icon"></use></svg></button></div><div id="mobile-sidebar" class="mobile-sidebar-container"><div class="mobile-sidebar-wrapper"><div class="mobile-nav-links"></div><div class="mobile-sidebar-items-c"><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-modules"><div>Modules</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-Designation.html">Designation</a></div><div class="sidebar-section-children"><a href="module-Resection.html">Resection</a></div><div class="sidebar-section-children"><a href="module-nifti_viewer.html">nifti_viewer</a></div><div class="sidebar-section-children"><a href="module-nifti_viewer_matlab_functions.html">nifti_viewer/matlab_functions</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-classes"><div>Classes</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="module-nifti_viewer-FILE.html">FILE</a></div></div><div class="sidebar-section-title with-arrow" data-isopen="false" id="sidebar-global"><div>Global</div><svg><use xlink:href="#down-icon"></use></svg></div><div class="sidebar-section-children-container"><div class="sidebar-section-children"><a href="global.html#Dropdown">Dropdown</a></div><div class="sidebar-section-children"><a href="global.html#Identifiers">Identifiers</a></div><div class="sidebar-section-children"><a href="global.html#Legend">Legend</a></div><div class="sidebar-section-children"><a href="global.html#LegendItem">LegendItem</a></div><div class="sidebar-section-children"><a href="global.html#UserDocumentation">UserDocumentation</a></div><div class="sidebar-section-children"><a href="global.html#generateAcronym">generateAcronym</a></div><div class="sidebar-section-children"><a href="global.html#handleFileRecord">handleFileRecord</a></div><div class="sidebar-section-children"><a href="global.html#insertRegionsAndGetIds">insertRegionsAndGetIds</a></div><div class="sidebar-section-children"><a href="global.html#mapConsecutive">mapConsecutive</a></div><div class="sidebar-section-children"><a href="global.html#parseCSVFile">parseCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#parseDesignation">parseDesignation</a></div><div class="sidebar-section-children"><a href="global.html#parseLocalization">parseLocalization</a></div><div class="sidebar-section-children"><a href="global.html#parseStimulation">parseStimulation</a></div><div class="sidebar-section-children"><a href="global.html#parseTests">parseTests</a></div><div class="sidebar-section-children"><a href="global.html#saveCSVFile">saveCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveDesignationCSVFile">saveDesignationCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveLocalizationToDatabase">saveLocalizationToDatabase</a></div><div class="sidebar-section-children"><a href="global.html#saveStimulationCSVFile">saveStimulationCSVFile</a></div><div class="sidebar-section-children"><a href="global.html#saveTestCSVFile">saveTestCSVFile</a></div></div></div><div class="mobile-navbar-actions"><div class="navbar-right-item"><button class="icon-button search-button" aria-label="open-search"><svg><use xlink:href="#search-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button theme-toggle" aria-label="toggle-theme"><svg><use class="theme-svg-use" xlink:href="#dark-theme-icon"></use></svg></button></div><div class="navbar-right-item"><button class="icon-button font-size" aria-label="change-font-size"><svg><use xlink:href="#font-size-icon"></use></svg></button></div></div></div></div><script type="text/javascript" src="scripts/core.min.js"></script><script src="scripts/search.min.js" defer="defer"></script><script src="scripts/third-party/fuse.js" defer="defer"></script><script type="text/javascript">var tocbotInstance=tocbot.init({tocSelector:"#eed4d2a0bfd64539bb9df78095dec881",contentSelector:".main-content",headingSelector:"h1, h2, h3",hasInnerContainers:!0,scrollContainer:".main-content",headingsOffset:130,onClick:bringLinkToView})</script></body></html>